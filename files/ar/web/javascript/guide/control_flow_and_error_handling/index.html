---
title: التحكم فى التدفق وامساك الاخطاء
slug: Web/JavaScript/Guide/Control_flow_and_error_handling
translation_of: Web/JavaScript/Guide/Control_flow_and_error_handling
---
<div>{{jsSidebar("JavaScript Guide")}} {{PreviousNext("Web/JavaScript/Guide/Grammar_and_types", "Web/JavaScript/Guide/Loops_and_iteration")}}</div>

<p class="summary" dir="rtl">جافاسكريبت تدعم مجموعة من البيانات المدمجة، وتحديدا التحكم في تدفق البيانات، التي يمكنك استخدامها لخلق قدرا كبيرا من التفاعل في التطبيق الخاص بك. يقدم هذا الفصل لمحة عامة عن هذه البيانات.</p>

<div style="font-size: 15; font-family: 'tahoma';">
<p dir="rtl">يحتوي هذا الفصل، <a href="/en-US/docs/Web/JavaScript/Reference/Statements">مرجع الجافاسكريبت</a> على تفاصيل شاملة عن التعليمات البرمجية. في جافاسكريبت، يتم استخدام رمز الفاصلة المنقوطة (<code>;</code>) لانهاء التعليمات البرمجية.</p>

<div class="note">
<p dir="rtl">ملحوظة: برامج الجافاسكريبت وبيانات الجافاسكريبت، غالباً ما تسمى تعليمات برمجية.</p>
</div>

<p dir="rtl">أي تعبير جافا سكريبت، هو  أيضا تعليمة برمجية. راجع <a href="/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators">Expressions and operators</a>  للحصول على معلومات كاملة حول التعبيرات.</p>

<h2 dir="rtl" id="Block_statement">Block statement</h2>

<p dir="rtl">ابسط تعليمة برمجية هي التعليمة البرمجية بلوك  block، التي تستخدم لاحتواء مجموعة من التعليمات البرمجية. البلوك محدد بواسطة الاقواس المتعرجة:</p>

<pre class="syntaxbox">{
  statement_1;
  statement_2;
  .
  .
  .
  statement_n;
}
</pre>

<h3 dir="rtl" id="مثال"><strong>مثال</strong></h3>

<p dir="rtl">اغلب استخدامات البلوك، تكون مع تعليمات التحكم في التدفق ( مثل <code>if</code>, <code>for</code>, <code>while</code> )</p>

<pre class="brush: js">while (x &lt; 10) {
  x++;
}
</pre>

<p dir="rtl">لدينا هنا، <code>{ ;++x }</code> التعليمة البرمجة block.</p>

<p dir="rtl"><strong>هام</strong>: في جافا سكريبت قبل ECMAScript2015. البلوك لم يكن لديه نطاق. المتغيرات المستخدمة في البلوك، سيتم تغيير نطاقها الى النطاق العام وهو السكريبت، فتصبح متغيرات عامة متاحة لجميع التعليمات البرمجية في السكريبت، اما اذا وجد البلوك داخل دالة سيتم تغيير نطاقها لهذه الدالة، وبالتالي ستصبح متغيرات محلية متاحة لهذه الدالة فقط.</p>

<p dir="rtl">في جافا سكريبت، البلوكات "المستقلة"  يمكن أن ينتج  عنها نتائج مختلفة تماما عما كان سينتج في C أو جافا. فمثلا</p>

<pre class="brush: js">var x = 1;
{
  var x = 2;
}
console.log(x); // outputs 2
</pre>

<p dir="rtl">مخرجات التعليمة البرمجية اعلاه، ستكون 2 وذالك لان المتغير x المتواجد <strong>داخل </strong>البلوك والمتغير x المتواجد <strong>خارج</strong> البلوك لديهما <strong>نفس النطاق</strong>، او بمعنى اصح، كلاهما في النطاق العام وهو السكريببت. في C أو جافا. المخرجات ستكون 1.</p>

<p dir="rtl">ابتداءا من ECMAScript2015. استخدام المتغير <code>let</code> داخل البلوك سينتج عنه سلوك مغاير. راجع {{jsxref("Statements/let", "let")}} صفحة المرجع للحصول على مزيد من المعلومات.</p>

<h2 dir="rtl" id="التعليمات_الشرطية">التعليمات الشرطية</h2>

<p dir="rtl">التعليمة الشرطية هي مجموعة من الأوامر التي ستنفذ إذا تحقق شرطا معيناً. تدعم الجافاسكريبت اثنين من التعليمات الشرطية: هما <code>if...else</code> و <code>switch</code>.</p>

<h3 dir="rtl" id="التعليمة_if...else">التعليمة <code>if...else</code></h3>

<p dir="rtl">ستنفذ التعليمة البرمجية المرتبطة بالتعليمة <code><strong>if</strong></code><strong> </strong>اذا كان الشرط المنطقي يساوي <code>true</code>. وكذالك ستنفذ التعليمة البرمجية المرتبطة بالتعليمة <code><strong>else</strong></code> اذا كان الشرط المنطقي يساوي <code>false</code>. استخدام التعليمة <code>else</code> اختياري. فيما تكون التعليمة <code>if</code> على الشكل التالي،</p>

<pre class="syntaxbox">if (condition) {
  statement_1;
} else {
  statement_2;
}</pre>

<p dir="rtl"><strong>الشرط</strong> <code>condition</code>، يمكن ان يكون اي تعبير لإختبار ما اذا كان الشرط <code>true</code> او <code>false </code>راجع <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean#Description">Boolean.</a> لتوضيح ما الذي سيتم تنفيذه: في حالة ما اذا كان الشرط صحيح  سيتم تنفيذ <code>statement_1</code>، اما اذا كان الشرط غير صحيح سيتم تنفيذ <code>statement_2</code>، يمكن ل <code>statement_1</code> و <code>statement_2</code> ان تكون اي تعليمات برمجية، بما فيها تعليمة <code>if</code> اخرى.</p>

<p dir="rtl">يمكنك أيضا توسيع مجال التعليمات الشرطية باستخدام <code><strong>else if</strong></code> لاختبار شروط متعددة في تسلسل، كما يلي:</p>

<pre class="syntaxbox">if (condition_1) {
  statement_1;
} else if (condition_2) {
  statement_2;
} else if (condition_n) {
  statement_n;
} else {
  statement_last;
}

</pre>

<p dir="rtl">في حالة وجود شروط متعددة سيتم تنفيذ شرط واحد فقط، وهو الشرط المنطقي الذي سيتم اختباره ب <code>true</code>. لتنفيذ عدة تعليمات برمجية، قم بتضمينها في التعليمة بلوك ({ ... }). من الجيد دائماً استخدام التعليمة بلوك، لا سيما عند استخدام التعليمات الشرطية المتداخلة :</p>

<pre class="syntaxbox">if (condition) {
  statement_1_runs_if_condition_is_true;
  statement_2_runs_if_condition_is_true;
} else {
  statement_3_runs_if_condition_is_false;
  statement_4_runs_if_condition_is_false;
}
</pre>

<div dir="rtl">من المستحسن عدم استخدام التعيينات البسيطة في التعبير الشرطي، لأنه يمكن الخلط بين التعيين والمساواة، على سبيل المثال، لا تستخدم التالي:</div>

<div dir="rtl"> </div>

<pre class="example-bad brush: js">if (x = y) {
  /* statements here */
}
</pre>

<p dir="rtl">إذا كنت بحاجة إلى استخدام تعيين بسيط في تعبير شرطي، استخدم أقواس إضافية حول التعيين. على سبيل المثال:</p>

<pre class="brush: js">if ((x = y)) {
  /* statements here */
}
</pre>

<h4 dir="rtl" id="القيم_Falsy">القيم  Falsy</h4>

<p dir="rtl">القيم التالية تُقَيًم إلى <code>false</code> عند اختباها في تعليمة شرطية (وتعرف ايضا بالقيم {{Glossary("Falsy")}}):</p>

<ul>
 <li><code>false</code></li>
 <li><code>undefined</code></li>
 <li><code>null</code></li>
 <li><code>0</code></li>
 <li><code>NaN</code></li>
 <li>السلسلة النصية الفارغة (<code>""</code>)</li>
</ul>

<p dir="rtl">كل القيم الأخرى، بما في ذلك جميع الكائنات، تقيم إلى <code>true</code> عندما يتم تمريرها إلى تعليمة شرطية.</p>

<p dir="rtl">لا تخلط بين القيم المنطقية الاولية <code>true</code> و <code>false</code> مع القيم true و false للكائن {{jsxref("Boolean")}}. على سبيل المثال:</p>

<pre class="brush: js">var b = new Boolean(false);
if (b) // this condition evaluates to true
if (b == true) // this condition evaluates to false
</pre>

<h4 dir="rtl" id="مثال_2"><strong>مثال</strong></h4>

<p dir="rtl">فى المثال التالى, الدالة checkData ستعود ب <code>true</code> ادا كان عدد الحروف في الكائن Text يساوي ثلاثة، بخلاف ذالك، سيظهر التنبيه (<code>alert</code>) وتعود ب <code>false</code>.</p>

<pre class="brush: js">function checkData() {
  if (document.form1.threeChar.value.length == 3) {
    return true;
  } else {
    alert('Enter exactly three characters. ' +
    document.form1.threeChar.value + ' is not valid.');
    return false;
  }
}
</pre>

<h3 dir="rtl" id="التعليمة_switch"><code>التعليمة</code> <code>switch</code></h3>

<p dir="rtl">التعليمة <code>switch</code> تسمح للبرنامج <strong>باختبار</strong> التعبير، وذالك من خلال مطابقة قيمة التعبير مع الحالة <code>case</code>. إذا تم العثور على تطابق، البرنامج سينفذ التعليمة البرمجية المرتبطة بها. التعليمة <code>switch</code> تكون على الشكل التالي:</p>

<pre class="syntaxbox">switch (expression) {
  case label_1:
    statements_1
    [break;]
  case label_2:
    statements_2
    [break;]
    ...
  default:
    statements_def
    [break;]
}
</pre>

<p dir="rtl">بداية يقوم البرنامج بالبحث عن الحالة <code>case</code> التي تطابق قيمتها قيمة ال <code>expression</code>، اذا وجدت، يقوم البرنامج بتنفيذ التعليمة البرمجية المرتبطة بها، اذا لم يجد ما يبحث عنه في اي من الحالات <code>case</code>، سيقوم البرنامج بتنفيذ التعليمات البرمجية المرتبطة بالحالة <code>default</code> اذا وجدت، لان وجود الحالة <code>default</code> في التعليمة <code>switch</code> اختياري. اذا لم يجد البرنامج اي حالة <code>case</code> متطابقة ولا الحالة <code>default</code> سيقوم بتنفيذ التعليمات البرمجية التي تلي التعليمة <code>switch</code>.</p>

<p dir="rtl">التعليمة <code>break</code> مرتبطة مع كل حالة <code>case</code>، مهمتها جعل البرنامج يقفز خارج التعليمة <code>switch</code> بمجرد تنفيذ التعليمة البرمجية، واستكمال تنفيذ التعليمات البرمجية التي تلي التعليمة <code>switch</code>. بما ان وجود التعليمة <code>break</code> اختياري، ففي حالة عدم وجودها سيقوم البرنامج بتنفيذ التعليمة التالية في <code>switch</code>.</p>

<h4 dir="rtl" id="مثال_3">مثال</h4>

<p dir="rtl">في المثال التالي، اذا كان <code>fruittype</code> يساوي "Bananas"،  سيقوم البرنامج بتنفيذ  التعليمات البرمجية المرتبطة بالحالة <code>'case: 'Banana</code>. عندما سسيجد <code>break</code>، سيقوم بايقاف <code>switch</code> وينفذ التعليمات البرمجية التي تليها. اذا لم يجد <code>break</code> سينفذ التعليمة البرمجية المرتبطة بالحالة '<code>case</code>: 'Cherries ايضا. </p>

<pre class="brush: js">switch (fruittype) {
  case 'Oranges':
    console.log('Oranges are $0.59 a pound.');
    break;
  case 'Apples':
    console.log('Apples are $0.32 a pound.');
    break;
  case 'Bananas':
    console.log('Bananas are $0.48 a pound.');
    break;
  case 'Cherries':
    console.log('Cherries are $3.00 a pound.');
    break;
  case 'Mangoes':
    console.log('Mangoes are $0.56 a pound.');
    break;
  case 'Papayas':
    console.log('Mangoes and papayas are $2.79 a pound.');
    break;
  default:
   console.log('Sorry, we are out of ' + fruittype + '.');
}
console.log("Is there anything else you'd like?");</pre>

<div class="note">
<p dir="rtl"><strong>ملاحظة :</strong> لمزيد من التفاصيل حول التعليمة  <code><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Instructions/switch">switch</a></code>.</p>
</div>

<h2 dir="rtl" id="التعليمات_المعالجة_للاستثناءات">التعليمات المعالجة للاستثناءات</h2>

<blockquote>
<p dir="rtl">من الثابت بقواعد الرياضيات انه لا يجوز القسمة على صفر بأي حال من الأحوال لذلك لن يتمكن البرنامج من تنفيذ العملية المطلوبة وستظهر للمستخدم رسالة خطا تنفيذي لا يمكنه تفاديها وعلى الأغلب أنها ستسبب بإغلاق البرنامج.<br>
 <br>
 ولمعالجة أخطاء التنفيذ هذه وتحجيمها فبل حدوثها وفرت لنا لغات البرمجة وعلى رأسها الجافاسكريبت آلية تتمثل بوضع جمل استثنائية خاصة يتوقع من خلالها المبرمج أنواع أخطاء التنفيذ التي قد تحدث ويقوم ببرمجة حدث برمجي بكل استثناء ليتم تنفيذه بدلا من الخطا التنفيذي.</p>

<p dir="rtl">بصفة عامة، الاستثناءات هي عبارة عن آلية برمجية لمعالجة أخطاء التنفيذ المحتمل وقوعها.</p>

<p dir="rtl"> </p>
</blockquote>

<p dir="rtl">يمكنك قذف (توليد)  الاستثناءات من خلال التعليمة <code>throw</code> والتعامل معها باستخدام التعليمة <code>try...catch</code></p>

<ul>
 <li><a href="#throw_statement"><code>throw</code> statement</a></li>
 <li><a href="#try...catch_statement"><code>try...catch</code> statement</a></li>
</ul>

<h3 dir="rtl" id="انواع_الاستثناءات">انواع الاستثناءات</h3>

<p dir="rtl">في جافا سكريبت، يمكن استخدام الكائنات لقذف/توليد الاستثناءات. ومع ذلك، ليس كل الكائنات القاذفة هي نفسها. من الشائع إلى حد ما، قذف الاعداد أو السلاسل الحرفية كاخطاء، الا انه في كثير من الأحيان سيكون أكثر فعالية استخدام أحد أنواع الاستثناءات التالية، والتي أنشئت خصيصا لهذا الغرض:</p>

<ul>
 <li><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types">ECMAScript exceptions</a></li>
 <li>{{domxref("DOMException")}} و {{domxref("DOMError")}}</li>
</ul>

<h3 dir="rtl" id="التعليمة_throw"><code>التعليمة throw</code></h3>

<p dir="rtl">التعليمة <code>throw</code> تقذف الاخطاء. عند حدوث خطأ، عادة سوف تتوقف جافا سكريبت، وستولد رسالة للاعلان عن الخطأ. المصطلح التقني لهذه العملية هو : الجافاسكريبت ستقذف (throw) الخطأ. التعليمة <code>throw</code> تمكتك من انشاء خطأ حسب رغبتك. المصطلح التقني لهذه العملية هو: اقذف استثناءا (throw an exception).</p>

<p dir="rtl">إستخدِم التعليمة <code>throw</code> لقذف الإستثناء، عنما تريد قذف إستثناءا، عليك تحديد التعبير (<code>expression</code>) الذي سيحتوي على القيمة التي ستقذف:</p>

<pre class="syntaxbox">throw expression;
</pre>

<p dir="rtl">يمكنك قذف اي استثناء، وليس مجرد تعبيرات من نوع معين. التعليمة البرمجية التالية تقذف استثناءات لمختلف انواع البيانات:</p>

<pre class="brush: js">throw 'Error2';   // String type
throw 42;         // Number type
throw true;       // Boolean type
throw {toString: function() { return "I'm an object!"; } };
</pre>

<div class="note" dir="rtl"><strong>ملحوظة</strong> : يمكنك تحديد كائن عندما ستقوم بقذف الاستثناء. يمكنك بعد ذالك الاشارة إلى خصائص الكائن في البلوك catch. يقوم المثال التالي بإنشاء الكائن myUserException من النوع UserException واستحدامه في التعليمة throw.</div>

<pre class="brush: js">// Create an object type UserException
function UserException(message) {
  this.message = message;
  this.name = 'UserException';
}

// Make the exception convert to a pretty string when used as a string
// (e.g. by the error console)
UserException.prototype.toString = function() {
  return this.name + ': "' + this.message + '"';
}

// Create an instance of the object type and throw it
throw new UserException('Value too high');</pre>

<div class="note">
<p dir="rtl">لمزيد من المعلومات حول هذه التعليمة، راجع صفحة مرجع الجافا سكريبت  <code><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Instructions/throw">throw</a></code>.</p>
</div>

<h3 dir="rtl" id="التعليمة_try...catch"><code>التعليمة </code> <code>try...catch</code></h3>

<p dir="rtl">التعليمة <code>try...catch</code> تحدد بلوك من التعليمات البرمجية لتجربتها، و تنص على وجود واحد أو أكثر من الاستجابات التي ينبغي على الاستثناء ان يقذفها. إذا تم <strong>قذف</strong> الاستثناء، <strong>ستمسك</strong> به التعليمة  <code>try...catch.</code></p>

<p dir="rtl">التعليمة <code>try...catch </code>تتكون من البلوك <code>try</code> الذي سيحتوي على واحدة أو أكثر من التعليمات البرمجية، والبلوك <code>catch</code> سيحتوي على التعليمات البرمجية التي تحدد ما يجب فعله اذا تم قذف الاستثناء من البلوك <code>try</code>. بمعنى اخر، في معظم الحالات. نريد من التعليمات البرمجية داخل البلوك <code>try</code> ان تسير بشكل طبيعي، وفي حالة حدوث مشاكل يمرّر التحكم الى البلوك <code>catch</code>. إذا كانت هناك احدى التعليمات البرمجية داخل البلوك <code>try</code> تقذف استثناءا، سيتم نقل التحكم فورا إلى البلوك <code>catch</code>. وإذا لم يتم إرسال أي استثناء من داخل البلوك <code>try</code>، فالبلوك <code>catch</code> لن يقم باي شئ. هذه التعليمة البرمجية يمكن ان تحتوي على البلوك <code>finally</code> والذي سينفذ بعد تنفيذ البلوك  <code>try</code> و <code>catch</code>، وايضا سينفذ قبل تنفيذ التعليمات البرمجية التي تلي التعليمة <code>try...catch</code>، اذا وجدت.</p>

<p dir="rtl"><br>
 المثال التالى يستخدم التعليمة <code>try...catch</code>. ويقوم باستدعاء دالة تعود باسم الشهر من مصفوفة بناء على القيمة التي تم تمريرها إلى الدالة. إذا كانت القيمة لا تتوافق مع رقم الشهر (1-12)، سيولّد استثناء مع القيمة "InvalidMonthNo" فيما تقوم التعليمة البرمجية في البلوك <code>catch</code> بتعين القيمة <code>unknown</code> إلى المتغير <code>monthName</code>.</p>

<pre class="brush: js">function getMonthName(mo) {
  mo = mo - 1; // Adjust month number for array index (1 = Jan, 12 = Dec)
  var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul',
                'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  if (months[mo]) {
    return months[mo];
  } else {
    throw 'InvalidMonthNo'; //throw keyword is used here
  }
}

try { // statements to try
  monthName = getMonthName(myMonth); // function could throw exception
}
catch (e) {
  monthName = 'unknown';
  logMyErrors(e); // pass exception object to error handler -&gt; your own function
}
</pre>

<h4 dir="rtl" id="The_catch_block">The <code>catch</code> block</h4>

<p dir="rtl">يمكنك استخدام البلوك  <code>catch</code> للامساك بجميع الاستثناءات التي سيتم قذفها من البلوك <code>try.</code></p>

<pre class="syntaxbox">catch (catchID) {
  statements
}
</pre>

<p dir="rtl">البلوك <code>catch</code> يحدد الايدي <code>catchID</code> الذي سيمسك القيمة المحددة من طرف التعليمة <code>throw</code>، يمكنك استخدام هذا الايدي للحصول على معلومات حول الاستثناء الذي سيقذف. جافا سكريبت ستنشئ هذا الايدي عند دخوله الى البلوك <code>catch</code>. يبدا عمر هذا الايدي من لحظة دخوله الى البلوك <code>catch،</code> وينتهي عندما ينتهي البلوك <code>catch </code>من التنفيذ.</p>

<p dir="rtl">على سبيل المثال، التعليمة البرمجية التالية ستقذف استثناءا. عند حدوث الاستثناء، سيتم نقل التحكم الى البلوك <code>catch</code>.</p>

<pre class="brush: js">try {
  throw 'myException'; // generates an exception
}
catch (e) {
  // statements to handle any exceptions
  logMyErrors(e); // pass exception object to error handler
}
</pre>

<h4 dir="rtl" id="The_finally_block">The <code>finally</code> block</h4>

<p dir="rtl">البلوك <code>finally</code> سيحتوي على التعليمات البرمجية التي سيقوم بتنفيذها بعدما تنفذ البلوكات <code>try</code> و <code>catch</code>، وايضا سينفذ قبل تنفيذ التعليمات البرمجية التي تلي التعليمة <code>try...catch</code>. سينفذ البلوك <code>finally</code> سواء تم قذف الاستثناء ام لا، اذا تم قذف الاستثناء، ستنفذ التعليمات البرمجية في البلوك <code>finally</code> حتى وان لم يتم معالجة الاستثناء في البلوك <code>catch</code>.</p>

<p dir="rtl">يمكنك استخدام البلوك <code>finally</code> لجعل السكريبت الخاص بك يفشل بأمان عند حدوث استثناء، على سبيل المثال، اذا كنت في حاجة إلى تحرير مورد، او لغلق ال flux، الخ. المثال التالي يفتح ملف ثم ينفذ التعليمات البرمجية لهذا ملف (server-side JavaScript يسمح لك بالوصول الى الملفات). اذا تم قذف استثناء في حين أن الملف مفتوح، البلوك <code>finally</code> ستغلق هذا الملف قبل فشل السكريبت.</p>

<pre class="brush: js">openMyFile();
try {
  writeMyFile(theData); //This may throw a error
} catch(e) {
  handleError(e); // If we got a error we handle it
} finally {
  closeMyFile(); // always close the resource
}
</pre>

<p dir="rtl">عندما سيقوم البلوك <code>finally</code> بارجاع قيمة، تصبح هذه القيمة قيمة الإرجاع من كامل المجموعة  <code>try-catch-finally</code> بغض النظر عن التعليمات البرمجية العائدة من البلوكات  <code>try</code> و <code>catch</code>.</p>

<pre class="brush: js">function f() {
  try {
    console.log(0);
    throw 'bogus';
  } catch(e) {
    console.log(1);
    return true; // this return statement is suspended
                 // until finally block has completed
    console.log(2); // not reachable
  } finally {
    console.log(3);
    return false; // overwrites the previous "return"
    console.log(4); // not reachable
  }
  // "return false" is executed now
  console.log(5); // not reachable
}
f(); // console 0, 1, 3; returns false
</pre>

<p dir="rtl">الكتابة فوق القيم العائدة من قبل البلوك <code>finally</code> ينطبق أيضا على قذف الاستثناءات او اعادة القذف داخل البلوك <code>catch</code>:</p>

<pre class="brush: js">function f() {
  try {
    throw 'bogus';
  } catch(e) {
    console.log('caught inner "bogus"');
    throw e; // this throw statement is suspended until
             // finally block has completed
  } finally {
    return false; // overwrites the previous "throw"
  }
  // "return false" is executed now
}

try {
  f();
} catch(e) {
  // this is never reached because the throw inside
  // the catch is overwritten
  // by the return in finally
  console.log('caught outer "bogus"');
}

// OUTPUT
// caught inner "bogus"</pre>

<h4 dir="rtl" id="التعليمات_try...catch_المتداخلة">التعليمات try...catch المتداخلة</h4>

<p dir="rtl">يمكن عمل واحدة او اكثر من التعليمات <code>try...catch</code> المتداخلة.  شرط عدم توفر <code>try...catch</code> الداخلية على البلوك <code>catch</code>، تتطلب وجود البلوك <code>finally</code> والتعليمة <code>try...catch</code> الخارجية سوف تستخدم البلوك <code>catch</code> ليتم التحقق من المطابقة. راجع <a href="/en-US/docs/Web/JavaScript/Reference/Statements/try...catch#Nested_try-blocks">nested try-blocks</a> في صفحة المرجع الخاص بالتعليمة <code><a href="/en-US/docs/Web/JavaScript/Reference/Statements/try...catch">try...catch</a></code>.</p>

<h3 dir="rtl" id="باستخدام_الكائنات_Error">باستخدام الكائنات <code>Error</code></h3>

<p dir="rtl">اعتماداً على نوع الخطأ، من الممكن استخدام الخصائص <code>name</code> و <code>message</code> للحصول على رسالة أكثر دقة. عموما لدينا الخاصية <code>name</code> التي ستعرض نوع الخطا الذي حدث (مثلا: <code>DOMException</code> او <code>Error</code>). والخاصية <code>message</code> التي ستعرض رسالة الخطأ لوصف هذا الخطا (تستخدم عادة عندما نريد تحويل او عرض نص الخطأ). على سبيل المثال:</p>

<pre class="brush: js">try {
  throw new Error('Whoops!');
} catch (e) {
	if( e.message === 'Whoops!'){
		e.message = "Costume message";
	}
  console.log(e.name + ': ' + e.message); // Error: Costume message
}</pre>

<p dir="rtl">اذا كنت ترغب في انشاء اخطاء خاصة بك، يمكتك استخدام المنشئ <code>Error</code> من أجل الاستفادة من خصائصه. على سبيل المثال:</p>

<pre class="brush: js">function doSomethingErrorProne() {
  if (ourCodeMakesAMistake()) {
    throw (new Error('The message'));
  } else {
    doSomethingToGetAJavascriptError();
  }
}
....
try {
  doSomethingErrorProne();
} catch (e) {
  console.log(e.name); // logs 'Error'
  console.log(e.message); // logs 'The message' or a JavaScript error message)
}</pre>

<h2 dir="rtl" id="Promises">Promises</h2>

<p dir="rtl">ابتداءا من ECMAScript2015. اصبح لجافاسكريبت الكائن <code>Promise</code> والذي يسمح لك بالتحكم في التدفق والعمليات المتزامنة.</p>

<p dir="rtl">Promise هو احد هذه الحالات:</p>

<ul dir="rtl">
 <li><em>pending</em>  (قيد الانتظار): الحالة الأولية، لم تَفِ أو تم رفضها.</li>
 <li><em>fulfilled</em>  (وفَّى): عملية ناجحة</li>
 <li><em>rejected</em>  (رُفِض): فشل العملية.</li>
 <li><em>settled</em>  (التسوية): إما وفى بوعد أو رفضه، ولكن ليس قيد الانتظار.</li>
</ul>

<p><img alt="" src="https://mdn.mozillademos.org/files/8633/promises.png" style="height: 297px; width: 801px;"></p>

<h3 dir="rtl" id="تحميل_صورة_ب_XHR">تحميل صورة ب XHR</h3>

<p dir="rtl">مثال بسيط باستخدام <code>Promise</code> و <code><a href="/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></code> في مستودع الاكواد MDN GitHub. راجع المثال <a href="https://github.com/mdn/js-examples/tree/master/promises-test"> js-examples</a>. يمكنك ايضا مراجعة <a href="https://mdn.github.io/js-examples/promises-test/">see it in action</a>. تم التعليق على كل خطوة لتمكينك من متابعة سير عملية Promise و XHR. هذا الإصدار من دون تعليقات، يعرض تدفق ال Promise:</p>

<pre class="brush: js">function imgLoad(url) {
  return new Promise(function(resolve, reject) {
    var request = new XMLHttpRequest();
    request.open('GET', url);
    request.responseType = 'blob';
    request.onload = function() {
      if (request.status === 200) {
        resolve(request.response);
      } else {
        reject(Error('Image didn\'t load successfully; error code:'
                     + request.statusText));
      }
    };
    request.onerror = function() {
      reject(Error('There was a network error.'));
    };
    request.send();
  });
}</pre>

<p dir="rtl">للحصول على معلومات أكثر تفصيلاً، راجع {{jsxref("Promise")}} في صفحة المرجع.</p>

<div>
<div>{{PreviousNext("Web/JavaScript/Guide/Grammar_and_types", "Web/JavaScript/Guide/Loops_and_iteration")}}</div>
</div>
</div>
