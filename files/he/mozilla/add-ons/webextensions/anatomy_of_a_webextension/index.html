---
title: אנטומיה של הרחבה
slug: Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension
translation_of: Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension
---
<div>{{AddonSidebar}}</div>

<p>הרחבה מורכבת מאוסף של קבצים, ארוזים להפצה והתקנה. במאמר זה, נסקור במהירות את הקבצים העשויים להיות נוכחים בהרחבה.</p>

<h2 id="manifest.json">manifest.json</h2>

<p>זהו הקובץ היחיד שחייב להימצא בכל הרחבה הוא כולל מטאדאטה בסיסית כגון שם, גירסה וההרשאות הדרושות. הוא גם מספק מצביעים לקבצים אחרים בהרחבה.</p>

<p>מניפסט זה יכול לכלול גם מצביעים לעוד מספר טיפוסי קבצים </p>

<ul>
 <li><a href="https://wiki.developer.mozilla.org/he/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#%D7%AA%D7%A1%D7%A8%D7%99%D7%98%D7%99_%D7%A8%D7%A7%D7%A2">תסריטי רקע</a>: מימוש לוגיקה לטווח רחוק.</li>
 <li>צלמיות להרחבות ולכל הכפתורים שיוגדרו. .</li>
 <li><a href="https://wiki.developer.mozilla.org/he/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#%D7%A1%D7%A8%D7%92%D7%9C%D7%99%D7%9D_%D7%A6%D7%93%D7%93%D7%99%D7%99%D7%9D_%D7%97%D7%9C%D7%95%D7%A0%D7%95%D7%AA_%D7%A7%D7%95%D7%A4%D7%A6%D7%99%D7%9D_%D7%93%D7%A4%D7%99_%D7%90%D7%95%D7%A4%D7%A6%D7%99%D7%95%D7%AA">סרגלים צדדיים, חלונות קופצים ודפי אופציות</a>: מסמכי HTML המספקים תוכן לרכיבי ממשק משתמש שונים.</li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#Content_scripts">תסריטי תוכן</a>: ג'אווהסקריפט הכלול בהרחבה שלך, שיוחדרו לתוך דפי רשת.</li>
 <li><a href="https://wiki.developer.mozilla.org/he/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#%D7%A1%D7%A8%D7%92%D7%9C%D7%99%D7%9D_%D7%A6%D7%93%D7%93%D7%99%D7%99%D7%9D_%D7%97%D7%9C%D7%95%D7%A0%D7%95%D7%AA_%D7%A7%D7%95%D7%A4%D7%A6%D7%99%D7%9D_%D7%93%D7%A4%D7%99_%D7%90%D7%95%D7%A4%D7%A6%D7%99%D7%95%D7%AA">משאבים נגישים לרשת</a>: הכנת תוכן ארוז מגיש לדפי רשת ותסריטי תוכן.</li>
</ul>

<p><img alt="" src="https://mdn.mozillademos.org/files/13669/webextension-anatomy.png" style="display: block; height: 581px; margin-left: auto; margin-right: auto; width: 600px;"></p>

<p>ראו דף סימוכין לממשק  <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json">manifest.json</a> לכל הפרטים.</p>

<p>יחד עם כל אלה הרשומים במניפסט , הרחבה יכולה לכלול גם   <a dir="ltr" href="https://mdn.mozillademos.org/files/11553/browser-action.png">דפי הרחבה</a> נוספים וקבצים תומכים.</p>

<h2 id="תסריטי_רקע">תסריטי רקע</h2>

<p>הרחבות צריכות לעתים קרובות לשמור מצב ארוך טווח או לבצע םעולות ארוכות טווח ללא תלות בזמן החיים של דף רשת זה או אחר או בחלון דפדפן. בשביל זה יש תסריטי רקע.</p>

<p>תסריטי רקע נטענים מייד כאשר ההרחבה נטענת ונשארים טעונים עד שההרחבה מושבתת או מוסרת. נתין להשתמש בכל אחד מ<a href="/en-US/Add-ons/WebExtensions/API">ממשקי פיתוח הרחבות הרשת</a> בתסריט, כל עוד ביקשת את ה<a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">הרשאות</a> הדרושות.</p>

<h3 id="ציון_תסריטי_הרקע">ציון תסריטי הרקע</h3>

<p>ניתן לכלול תסריט רקע באמצעות המפתח  <code>background</code>  ב-"manifest.json":</p>

<pre class="brush: json">// manifest.json

"background": {
  "scripts": ["background-script.js"]
}</pre>

<p>ניתן לציין מספר תסריטי רקע: אם תעשו כן, הם  ירוצו באותו הקשר. , בדיוק כמו תסריטים מרובים הנטענים לתוך דף רשת יחיד.</p>

<p>במקום לציין תסריטי רקע, ניתן לציין דף רקע שיש לו יתרונות נוספים של תמיכה במודולי ES6:</p>

<p style="margin-bottom: 0em;"><strong>manifest.json</strong></p>

<pre class="brush: json">// manifest.json

"background": {
  "page": "background-page.html"
}</pre>

<p style="margin-bottom: 0em;"><strong>background-page.html</strong></p>

<pre class="brush: html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;script type="module" src="background-script.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
&lt;/html&gt;</pre>

<h3 id="סביבת_תסריטי_רקע">סביבת תסריטי רקע</h3>

<h4 id="ממשקי_פיותח_DOM">ממשקי פיותח DOM</h4>

<p>תסריטי רקע רצים בהקשר של דף מיוחד הקרוי דף רקע . זה נותן להם את המשתנה הגלובלי <code><a href="/en-US/docs/Web/API/Window">window</a></code>, יחד עם כל ממשקי פיתוח ה-  DOM המסופקים עם אובייקט זה</p>

<div class="blockIndicator warning">
<p> בפיירפוקס תסריטי רקע אינם תומכים בשימוש ב-, background pages do not support - <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/alert">alert()</a></code>, <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm">confirm()</a></code>, או <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt">prompt()</a></code>.</p>
</div>

<h4 id="ממשקי_פיתוח_הרחבות_רשת">ממשקי פיתוח הרחבות רשת</h4>

<p>תסריטי רקע יכולים להשתמש בכל <a href="/en-US/Add-ons/WebExtensions/API">ממשקי פיתוח הרחבות הרשת</a> בתסריט, כל עוד להרחבה יש את <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">ההרשאות</a> הדרושות.</p>

<h4 id="גישה_בין_מקורות">גישה בין מקורות</h4>

<p>תסריטי רקע יכולים ליצור בקשות XHR לכל מארח עבורו יש להם  <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">הרשאות מארח</a>.</p>

<h4 id="תוכן_ברשת">תוכן ברשת</h4>

<p>תסריטי רקע אינם מקבלים גישה ישירה לדפי רשת. אולם הם יכולים לטעון,  <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">תסריטי תוכן</a> לתוך דפי רשת ויכולים  <a href="/en-US/Add-ons/WebExtensions/Content_scripts#Communicating_with_background_scripts">לתקשר עם תסריטי תוכן אלה באמצעות ממשקי פיתוח להעברת הודעות</a></p>

<h4 id="מדיניות_אבטחת_תוכן">מדיניות אבטחת תוכן</h4>

<p>תסריטי תוכן מוגבלים מביצוע פעולות בעלות פוטנציאל סיכון , כמו שימוש ב-<code><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval">eval()</a></code> .דרך מדיניות אבטחת תוכן. ראו <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">מדיניות אבטחת תוכן</a> לפרטים נוספים על כך.</p>

<h2 id="סרגלים_צדדיים_חלונות_קופצים_דפי_אופציות">סרגלים צדדיים, חלונות קופצים, דפי אופציות</h2>

<p>ההרחבה שלך יכולה לכלול רכיבי ממשק משתמש שונים שהתוכן שלהם מוגדר על ידי מסמך HTML :</p>

<ul>
 <li> <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">סרגל צדדי</a> הוא לוח המוצג בצד שמאל של חלון הדפדפן, על יד דף הרשת</li>
 <li> <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Popups">חלון קופץ</a> הוא דיאלוג שניתן להציג כאשר המשתמש/ת מקליקשה על  <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">כפתור בסרגל הכלים</a> או <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">כפתור בסרגל הכתובת</a></li>
 <li> <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">דף אופציות</a> הינו דף המוצג כאשר המשתמש/ת ניגש/ת להעדפות שלך במנהל ההרחבות המקומי של הדפדפן.</li>
</ul>

<p>עבור כל אחד מרכיבים אלה ניתן ליצור קובץ HTML ולהצביע אליו באמצעות תכונה ספציפית ב-  <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json">manifest.json</a>. קובץ ה- HTML יכול לכלול  CSS וקבצי ג'אווהסקריפט, בדיוק כמו דף רשת נורמלי.</p>

<p>כל אלה הם טיפוס של  <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">דפי הרחבה</a>, ושלא כמו דף רשת רגיל, הג'אווהסקריפט שלך יכול להשתמש בכל אותם ממשקי פיתוח פריבילגיים להרחבות רשת כמו תסריט הרקע. הם יכולים גם לגשת ישירות למשתנים בדך הרקע באמצעות  {{WebExtAPIRef("runtime.getBackgroundPage()")}}.</p>

<h2 id="דפי_הרחבה">דפי הרחבה</h2>

<p>ניתן לכלול בהרחבה שלך  גם מסמכי  HTML שאינם מחוברים לרכיב ממשק משתמש מוגדר מראש כלשהו . שלא כמו מסמכים שניתן לספק עבור סרגלים צדדיים, חלונות קופצים, או דפי אופציות, אין להם הגדרה ב- manifest.json. אולם , יש להם גישה לכל אותם ממשקי פיתוח הרחבות רשת פריבילגיים כמו תסריט הרקע שלך.</p>

<p>באופן טיפוסי, דף כזה ייטען באמצעות  {{WebExtAPIRef("windows.create()")}} או {{WebExtAPIRef("tabs.create()")}}.</p>

<p>ראו <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">דפי הרחבה</a> כדי ללמוד עוד.</p>

<h2 id="Content_scripts">Content scripts</h2>

<p>Use content scripts to access and manipulate web pages. Content scripts are loaded into web pages and run in the context of that particular page.</p>

<p>Content scripts are extension-provided scripts which run in the context of a web page; this differs from scripts which are loaded by the page itself, including those which are provided in {{HTMLElement("script")}} elements within the page.</p>

<p>Content scripts can see and manipulate the page's DOM, just like normal scripts loaded by the page.</p>

<p>Unlike normal page scripts, they can:</p>

<ul>
 <li>Make cross-domain XHR requests.</li>
 <li>Use a small subset of the <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API">WebExtension APIs</a>.</li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#Communicating_with_background_scripts">Exchange messages with their background scripts</a> and can in this way indirectly access all the WebExtension APIs.</li>
</ul>

<p>Content scripts cannot directly access normal page scripts but can exchange messages with them using the standard <code><a href="/en-US/docs/Web/API/Window/postMessage">window.postMessage()</a></code> API.</p>

<p>Usually, when we talk about content scripts, we are referring to JavaScript, but you can inject CSS into web pages using the same mechanism.</p>

<p>See the <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">content scripts</a> article to learn more.</p>

<h2 id="משאבים_נגישים_לרשת">משאבים נגישים לרשת</h2>

<p>משאבים נגישים לרשת עם משאבים כגון תמונות, HTML, CSS, ו- JavaScript הנכללים בהרחבה  וייתכן שתרצו לאפשר להם גישה לתסריטי תוכן ותסריטי דף. ניתן להפנות למשאבים הנוצרים נגישים לרשת על ידי תסריטי דף ותסריטי תוכן באמצעות סכמת   URI מיוחדת.</p>

<p>לדוגמא, אם תסריט תוכן מעוניין להכניס קצת תמונות לתוך דפי רשת , ניתן לכלול אותם בהרחבה ולעשות אותם נגישים לרשת . אז תסריט התוכן יכול ליצור ולהוסיף תגיות   <code><a href="/en-US/docs/Web/HTML/Element/img">img</a></code> המפנות לתמונות דרך המאפיין <code>src</code>.</p>

<p>כדי ללמוד עוד, אטו טת התיעוד עבור המפתח <a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a>  ב-manifest.json .</p>
