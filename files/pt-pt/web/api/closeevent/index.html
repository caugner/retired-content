---
title: CloseEvent
slug: Web/API/CloseEvent
tags:
  - API
  - Interface
  - Referencia
  - Web
  - WebSocket
  - WebSockets
translation_of: Web/API/CloseEvent
---
<div>{{APIRef("Websockets API")}}</div>

<p>Um <code>CloseEvent</code> é enviado a clientes usando {{Glossary("WebSockets")}} quando a conexão é terminada. É enviado ao <em>listner</em> indicado pelo atributo <code>onclose</code> de objeto <code>WebSocket</code>.</p>

<h2 id="Construtor">Construtor</h2>

<dl>
 <dt>{{domxref("CloseEvent.CloseEvent", "CloseEvent()")}}</dt>
 <dd>Cria um novo <code>CloseEvent</code>.</dd>
</dl>

<h2 id="Propriedades">Propriedades</h2>

<p><em>Esta interface também herda propriedades do {{domxref("Event")}} de qual se deriva.</em></p>

<dl>
 <dt>{{domxref("CloseEvent.code")}} {{readOnlyInline}}</dt>
 <dd>Devolve uma <code>unsigned short</code> que contem o código enviado pelo servidor. Os seguintes valores são os códigos de estado permitidos, as definições foram traduzidas a partir do <a href="https://www.iana.org/assignments/websocket/websocket.xml#close-code-number">site da IANA</a>. Note que os códigos 1xxx são só usados internamente pelo WebSocket e não para uso com os dados transportados (como quando o protocolo da aplicação é invalido). Os únicos códigos que podem ser especificados no Firefox são o código 1000 e a série de 3000 a 4999 inclusivo [<a href="https://searchfox.org/mozilla-central/rev/bf81d741ff5dd11bb364ef21306da599032fd479/dom/websocket/WebSocket.cpp#2533">Fonte</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1467107">Bug</a>].</dd>
 <dd>
 <table class="standard-table" id="Status_codes">
  <tbody>
   <tr>
    <td class="header">Código</td>
    <td class="header">Nome</td>
    <td class="header">Descrição</td>
   </tr>
   <tr>
    <td><code>0</code>–<code>999</code></td>
    <td></td>
    <td><strong>Reservado e não utilizado.</strong></td>
   </tr>
   <tr>
    <td><code>1000</code></td>
    <td>Normal Closure</td>
    <td>
     <p>Encerramento normal; a conexão completou a tarefa para qual foi criada.</p>
    </td>
   </tr>
   <tr>
    <td><code>1001</code></td>
    <td>Going Away</td>
    <td>
     <p>O terminal está a desaparecer, seja devido a uma falha do servidor ou porque o navegador está a navegar para longe da página que abriu a ligação.</p>
    </td>
   </tr>
   <tr>
    <td><code>1002</code></td>
    <td>Protocol Error</td>
    <td>O terminal está a terminar a conexão devido a um erro de protocolo.</td>
   </tr>
   <tr>
    <td><code>1003</code></td>
    <td>Unsupported Data</td>
    <td>A conexão está a ser terminada porque o terminal recebeu dados num formato que não aceita (por exemplo um terminal de texto receber dados binarios).</td>
   </tr>
   <tr>
    <td><code>1004</code></td>
    <td></td>
    <td><strong>Reservado.</strong> Uma definição pode ser atribuída no futuro.</td>
   </tr>
   <tr>
    <td><code>1005</code></td>
    <td>No Status Received</td>
    <td><strong>Reservado.</strong>  Indica que nenhum código de estado foi oferecido, apesar de ser esperado um código.</td>
   </tr>
   <tr>
    <td><code>1006</code></td>
    <td>Abnormal Closure</td>
    <td><strong>Reservado.</strong> Usado para indicar que a conexão fechou anormalmente (isto é, sem uma <em>close frame</em> ser enviada) quando um código era esperado.</td>
   </tr>
   <tr>
    <td><code>1007</code></td>
    <td>Invalid frame payload data</td>
    <td>O terminal está a terminar a conexão porque a mensagem continha dados inconsistentes (e.x. dados não codificados em UTF-8 numa mensagem de texto).</td>
   </tr>
   <tr>
    <td><code>1008</code></td>
    <td>Policy Violation</td>
    <td>O terminal está a terminar a conexão porque recebeu uma mensagem que viola a sua política. Isto é um código genérico, usado quando os códigos 1003 e 1009 não são apropriados à situação.</td>
   </tr>
   <tr>
    <td><code>1009</code></td>
    <td>Message too big</td>
    <td>O terminal está a terminar a conexão porque o <em>data frame</em> recebido é demasiado grande.</td>
   </tr>
   <tr>
    <td><code>1010</code></td>
    <td>Missing Extension</td>
    <td>O cliente está a terminar a conexão porque esperava que o servidor negociasse uma ou mais extensões, mas não o fez.</td>
   </tr>
   <tr>
    <td><code>1011</code></td>
    <td>Internal Error</td>
    <td>O servidor está a terminar a conexão porque encontrou uma condição inesperada que a impede de completar o pedido.</td>
   </tr>
   <tr>
    <td><code>1012</code></td>
    <td>Service Restart</td>
    <td>O servidor está a terminar a conexão porque está a reiniciar. [<a href="https://www.ietf.org/mail-archive/web/hybi/current/msg09670.html">Ref</a>]</td>
   </tr>
   <tr>
    <td><code>1013</code></td>
    <td>Try Again Later</td>
    <td>O servidor está a terminar a conexão devido a uma condição temporária, por exemplo está sobrecarregado e está a reduzir o número de clientes. [<a href="https://www.ietf.org/mail-archive/web/hybi/current/msg09670.html">Ref</a>]</td>
   </tr>
   <tr>
    <td><code>1014</code></td>
    <td>Bad Gateway</td>
    <td>O servidor está a agir como uma <em>gateway</em> ou <em>proxy</em> e recebeu uma resposta inválida dum servidor mais adiante na conexão. Isto é parecido com o código de estado HTTP 502.</td>
   </tr>
   <tr>
    <td><code>1015</code></td>
    <td>TLS Handshake</td>
    <td><strong>Reservado.</strong> Indica que a conexão foi terminada devido a uma falha na execução de um aperto de mão TLS (por exemplo, o certificado do servidor não pode ser verificado).</td>
   </tr>
   <tr>
    <td><code>1016</code>–<code>1999</code></td>
    <td></td>
    <td><strong>Reservado para o futuro uso de padrões WebSocket.</strong></td>
   </tr>
   <tr>
    <td><code>2000</code>–<code>2999</code></td>
    <td></td>
    <td><strong>Reservado para uso de extensões de WebSocket.</strong></td>
   </tr>
   <tr>
    <td><code>3000</code>–<code>3999</code></td>
    <td></td>
    <td>Disponivel para uso por bibliotecas e <em>frameworks</em>. <strong>Não</strong> é para ser utilizado por aplicações. Disponível para registo através da IANA de forma de primeiro a chegar primeiro servido.</td>
   </tr>
   <tr>
    <td><code>4000</code>–<code>4999</code></td>
    <td></td>
    <td>Disponível para uso por aplicações.</td>
   </tr>
  </tbody>
 </table>
 </dd>
 <dt>{{domxref("CloseEvent.reason")}} {{readOnlyInline}}</dt>
 <dd>Devolve uma {{domxref("DOMString")}} a indicar a razão por qual o servidor terminou a conexão. Isto é específico ao servidor e sub-protocolo.</dd>
 <dt>{{domxref("CloseEvent.wasClean")}} {{readOnlyInline}}</dt>
 <dd>Devolve um {{jsxref("Boolean")}} que indica se a conexão não foi terminada de forma limpa.</dd>
</dl>

<h2 id="Métodos">Métodos</h2>

<p><em>Esta interface também herda métodos de {{domxref("Event")}} de qual se deriva.</em></p>

<dl>
 <dt>{{domxref("CloseEvent.initCloseEvent()")}} {{Non-standard_inline}} {{Obsolete_inline}}</dt>
 <dd>Inicializa o valor de um <code>CloseEvent</code>. Se o evento já foi enviado, o método não faz nada. Este método é obsoleto, use antes o construtor {{domxref("CloseEvent.CloseEvent", "CloseEvent()")}}.</dd>
</dl>

<h2 id="Especificações">Especificações</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Especificação</th>
   <th scope="col">Estado</th>
   <th scope="col">Comentário</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>{{ SpecName('HTML WHATWG', 'web-sockets.html#the-closeevent-interface', 'CloseEvent') }}</td>
   <td>{{ Spec2('HTML WHATWG') }}</td>
   <td>Definição inicial.</td>
  </tr>
 </tbody>
</table>

<h2 id="Compatibilidade">Compatibilidade</h2>



<p>{{Compat("api.CloseEvent")}}</p>

<h2 id="Ver_também">Ver também</h2>

<ul>
 <li>{{domxref("WebSocket")}}</li>
</ul>
